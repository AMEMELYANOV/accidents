<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head th:insert="fragment/head :: head"></head>
<body>
<div th:insert="fragment/navlogin :: navlogin"></div>
<div class="container mt-3">
    <div class="card" style="width: 100%">
        <div class="card-header">
            <b>Подробное описание инцидента</b>
        </div>
        <div class="card-body justify-content-center">
            <div class="row mb-3 ml-4">
                <div class="col-3 text-justify font-weight-bold">Наименование</div>
                <div class="col-4 text-justify font-weight-bold">Подробное описание</div>
                <div class="col text-justify font-weight-bold">Дата и время</div>
                <div class="col text-justify font-weight-bold">Адрес</div>
            </div>
            <div class="row mb-5 ml-4">
                <div class="col-3" th:text="${accident.name}"></div>
                <div class="col-4 text-justify" th:text="${accident.description}"></div>
                <div class="col text-justify"
                     th:text="${#temporals.format(accident.accidentDateTime, 'dd.MM.yyyy HH:mm')}"></div>
                <div class="col text-justify" th:text="${accident.address}"></div>
            </div>
            <div class="row mb-3 ml-4 mt-4">
                <div class="col-3 text-justify font-weight-bold">Тип</div>
                <div class="col-4 text-justify font-weight-bold">Правило</div>
                <div class="col text-justify font-weight-bold">Статус</div>
                <div class="col text-justify font-weight-bold">Пользователь</div>
            </div>
            <div class="row mb-5 ml-4">
                <div class="col-3 text-justify" th:text="${accident.type.name}"></div>
                <div class="col-4 text-start">
                    <ul class="mb-1" th:each="rule: ${accident.rules}">
                        <li class="text-left " th:text="${rule.name}"></li>
                    </ul>
                </div>
                <div class="col text-justify">
                    <span th:if="${#strings.toString(accident.status)} == 'NEW'">Не рассмотрена</span>
                    <span th:if="${#strings.toString(accident.status)} == 'ACCEPTED'">Принята</span>
                    <span th:if="${#strings.toString(accident.status)} == 'REJECTED'">Отклонена</span>
                    <span th:if="${#strings.toString(accident.status)} == 'CLOSED'">Завершена</span>
                </div>
                <div class="col text-justify" th:text="${accident.user.username}"></div>
            </div>

            <div class="row mb-3 ml-4 mt-4">
                <div class="col-7 text-justify font-weight-bold">Фотография</div>
                <div class="col-5 text-justify font-weight-bold">Действия пользователя</div>
            </div>
            <div class="row mb-5 ml-4">
                <div class="col-7 mb-3" style="text-align: right;">
                    <img th:src="@{/files/{fileId}(fileId=*{accident.fileId})}" class="rounded float-left" alt="No image">
                </div>

                <div class="col-auto">
                    <form th:action="@{/editAccident}" method="GET">
                        <input type="hidden" name="accidentId" th:value="${accident.id}"/>
                        <button type="submit" class="btn btn-secondary" style="width: 150px;">Редактировать</button>
                    </form>
                </div>
                <div class="col-auto">
                    <form th:action="@{/deleteAccident}" method="GET">
                        <input type="hidden" name="accidentId" th:value="${accident.id}"/>
                        <button type="submit" class="btn btn-secondary" style="width: 150px;">Удалить</button>
                    </form>
                </div>
            </div>

        </div>
    </div>
</div>
</body>
</html>